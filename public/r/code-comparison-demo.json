{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "code-comparison-demo",
  "type": "registry:example",
  "title": "Code Comparison Demo",
  "description": "Example showing a component which compares two code snippets.",
  "registryDependencies": [
    "https://magicui.design/r/code-comparison"
  ],
  "files": [
    {
      "path": "registry/example/code-comparison-demo.tsx",
      "content": "import { CodeComparison } from \"@/components/magicui/code-comparison\";\n\nconst beforeCode = `import { NextRequest } from 'next/server';\n\nexport const middleware = async (req: NextRequest) => {\n  let user = undefined;\n  let team = undefined;\n  const token = req.headers.get('token');\n\n  if(req.nextUrl.pathname.startsWith('/auth')) {\n    user = await getUserByToken(token);\n\n    if(!user) {\n      return NextResponse.redirect('/login');\n    }\n  }\n\n  if(req.nextUrl.pathname.startsWith('/team')) {\n    user = await getUserByToken(token);\n\n    if(!user) {\n      return NextResponse.redirect('/login');\n    }\n\n    const slug = req.nextUrl.query.slug;\n    team = await getTeamBySlug(slug);\n\n    if(!team) {\n      return NextResponse.redirect('/');\n    }\n  }\n\n  return NextResponse.next();\n}\n\nexport const config = {\n  matcher: ['/((?!_next/|_static|_vercel|[\\\\w-]+\\\\.\\\\w+).*)'],\n};`;\n\nconst afterCode = `import { createMiddleware, type MiddlewareFunctionProps } from '@app/(auth)/auth/_middleware';\nimport { auth } from '@app/(auth)/auth/_middleware';\nimport { team } from '@app/(team)/team/_middleware';\n\nconst middlewares = {\n  '/auth{/:path?}': auth,\n  '/team{/:slug?}': [ auth, team ],\n};\n\nexport const middleware = createMiddleware(middlewares);\n\nexport const config = {\n  matcher: ['/((?!_next/|_static|_vercel|[\\\\w-]+\\\\.\\\\w+).*)'],\n};`;\n\nexport default function CodeComparisonDemo() {\n  return (\n    <CodeComparison\n      beforeCode={beforeCode}\n      afterCode={afterCode}\n      language=\"typescript\"\n      filename=\"middleware.ts\"\n      lightTheme=\"github-light\"\n      darkTheme=\"github-dark\"\n    />\n  );\n}\n",
      "type": "registry:example",
      "target": "components/code-comparison-demo.tsx"
    },
    {
      "path": "registry/magicui/code-comparison.tsx",
      "content": "\"use client\";\n\nimport { FileIcon } from \"lucide-react\";\nimport { useTheme } from \"next-themes\";\nimport { useEffect, useState } from \"react\";\n\ninterface CodeComparisonProps {\n  beforeCode: string;\n  afterCode: string;\n  language: string;\n  filename: string;\n  lightTheme: string;\n  darkTheme: string;\n}\n\nexport function CodeComparison({\n  beforeCode,\n  afterCode,\n  language,\n  filename,\n  lightTheme,\n  darkTheme,\n}: CodeComparisonProps) {\n  const { theme, systemTheme } = useTheme();\n  const [highlightedBefore, setHighlightedBefore] = useState(\"\");\n  const [highlightedAfter, setHighlightedAfter] = useState(\"\");\n\n  useEffect(() => {\n    const currentTheme = theme === \"system\" ? systemTheme : theme;\n    const selectedTheme = currentTheme === \"dark\" ? darkTheme : lightTheme;\n\n    async function highlightCode() {\n      try {\n        const { codeToHtml } = await import(\"shiki\");\n        const before = await codeToHtml(beforeCode, {\n          lang: language,\n          theme: selectedTheme,\n        });\n        const after = await codeToHtml(afterCode, {\n          lang: language,\n          theme: selectedTheme,\n        });\n        setHighlightedBefore(before);\n        setHighlightedAfter(after);\n      } catch (error) {\n        console.error(\"Error highlighting code:\", error);\n        setHighlightedBefore(`<pre>${beforeCode}</pre>`);\n        setHighlightedAfter(`<pre>${afterCode}</pre>`);\n      }\n    }\n    highlightCode();\n  }, [\n    theme,\n    systemTheme,\n    beforeCode,\n    afterCode,\n    language,\n    lightTheme,\n    darkTheme,\n  ]);\n\n  const renderCode = (code: string, highlighted: string) => {\n    if (highlighted) {\n      return (\n        <div\n          className=\"h-full overflow-auto bg-background font-mono text-xs [&>pre]:h-full [&>pre]:!bg-transparent [&>pre]:p-4 [&_code]:break-all\"\n          dangerouslySetInnerHTML={{ __html: highlighted }}\n        />\n      );\n    } else {\n      return (\n        <pre className=\"h-full overflow-auto break-all bg-background p-4 font-mono text-xs text-foreground\">\n          {code}\n        </pre>\n      );\n    }\n  };\n  return (\n    <div className=\"mx-auto w-full max-w-5xl\">\n      <div className=\"relative w-full overflow-hidden rounded-md border border-border\">\n        <div className=\"relative grid md:grid-cols-2 md:divide-x md:divide-border\">\n          <div>\n            <div className=\"flex items-center bg-accent p-2 text-sm text-foreground\">\n              <FileIcon className=\"mr-2 h-4 w-4\" />\n              {filename}\n              <span className=\"ml-auto\">before</span>\n            </div>\n            {renderCode(beforeCode, highlightedBefore)}\n          </div>\n          <div>\n            <div className=\"flex items-center bg-accent p-2 text-sm text-foreground\">\n              <FileIcon className=\"mr-2 h-4 w-4\" />\n              {filename}\n              <span className=\"ml-auto\">after</span>\n            </div>\n            {renderCode(afterCode, highlightedAfter)}\n          </div>\n        </div>\n        <div className=\"absolute left-1/2 top-1/2 flex h-8 w-8 -translate-x-1/2 -translate-y-1/2 items-center justify-center rounded-md bg-accent text-xs text-foreground\">\n          VS\n        </div>\n      </div>\n    </div>\n  );\n}\n",
      "type": "registry:ui",
      "target": "components/magicui/code-comparison.tsx"
    }
  ]
}