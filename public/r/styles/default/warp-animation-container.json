{
  "name": "warp-animation-container",
  "type": "registry:ui",
  "dependencies": [
    "framer-motion"
  ],
  "files": [
    {
      "path": "magicui/warp-animation-container.tsx",
      "content": "import React, { useCallback, useMemo } from \"react\";\nimport clsx from \"clsx\";\nimport { motion } from \"framer-motion\";\n\ninterface WarpAnimationContainerProps {\n  children: React.ReactNode;\n  perspective?: number;\n  className?: string;\n  beamsPerSide?: number;\n  beamSize?: number /* Percentage of the container's size */;\n  beamDelayMax?: number;\n  beamDelayMin?: number;\n  beamDuration?: number;\n}\n\nconst Beam = ({\n  width,\n  x,\n  delay,\n  duration,\n}: {\n  width: string | number;\n  x: string | number;\n  delay: number;\n  duration: number;\n}) => {\n  const hue = Math.floor(Math.random() * 360);\n  const ar = Math.floor(Math.random() * 10) + 1;\n\n  return (\n    <motion.div\n      className={clsx(`absolute top-0`)}\n      style={{\n        left: x,\n        width,\n        aspectRatio: 1 / ar,\n        background: `linear-gradient(hsl(${hue} 80% 60%), transparent)`,\n      }}\n      initial={{ y: \"100cqmax\", x: \"-50%\" }}\n      animate={{ y: \"-100%\", x: \"-50%\" }}\n      transition={{\n        duration,\n        delay,\n        repeat: Infinity,\n        ease: \"linear\",\n      }}\n    />\n  );\n};\n\nconst WarpAnimationContainer: React.FC<WarpAnimationContainerProps> = ({\n  children,\n  perspective = 100,\n  className,\n  beamsPerSide = 3,\n  beamSize = 5,\n  beamDelayMax = 3,\n  beamDelayMin = 0,\n  beamDuration = 3,\n}) => {\n  const sideStyle: React.CSSProperties = {\n    position: \"absolute\",\n    transformStyle: \"preserve-3d\",\n    containerType: \"inline-size\",\n  };\n\n  const generateBeams = useCallback(() => {\n    const beams = [];\n    const cellsPerSide = Math.floor(100 / beamSize);\n    const step = cellsPerSide / beamsPerSide;\n\n    for (let i = 0; i < beamsPerSide; i++) {\n      const x = Math.floor(i * step);\n      const delay =\n        Math.random() * (beamDelayMax - beamDelayMin) + beamDelayMin;\n      beams.push({ x, delay });\n    }\n    return beams;\n  }, [beamsPerSide, beamSize, beamDelayMax, beamDelayMin]);\n\n  const topBeams = useMemo(() => generateBeams(), [generateBeams]);\n  const rightBeams = useMemo(() => generateBeams(), [generateBeams]);\n  const bottomBeams = useMemo(() => generateBeams(), [generateBeams]);\n  const leftBeams = useMemo(() => generateBeams(), [generateBeams]);\n\n  return (\n    <div\n      className={clsx(\n        \"relative grid place-items-center border rounded  p-20\",\n        className,\n      )}\n      style={{\n        transformStyle: \"preserve-3d\",\n      }}\n    >\n      <div\n        className=\"absolute left-0 top-0 size-full overflow-hidden pointer-events-none\"\n        style={{\n          perspective: `${perspective}px`,\n          containerType: \"size\",\n          transformStyle: \"preserve-3d\",\n          clipPath: \"inset(0 0 0 0)\",\n        }}\n      >\n        {/* warp__side--top */}\n        <div\n          style={{\n            ...sideStyle,\n            width: \"100cqi\", // 100% of the container's inline size\n            height: \"100cqmax\",\n            transformOrigin: \"50% 0%\",\n            transform: \"rotateX(-90deg)\",\n          }}\n        >\n          {topBeams.map((beam, index) => (\n            <Beam\n              key={`top-${index}`}\n              width={`${beamSize}%`}\n              x={`${beam.x * beamSize}%`}\n              delay={beam.delay}\n              duration={beamDuration}\n            />\n          ))}\n        </div>\n        {/* warp__side--right */}\n        <div\n          style={{\n            ...sideStyle,\n            width: \"100cqh\", // 100% of the container's block size\n            height: \"100cqmax\",\n            top: 0,\n            right: 0,\n            transformOrigin: \"100% 0%\",\n            transform: \"rotate(-90deg) rotateX(-90deg)\",\n          }}\n        >\n          {rightBeams.map((beam, index) => (\n            <Beam\n              key={`right-${index}`}\n              width={`${beamSize}%`}\n              x={`${beam.x * beamSize}%`}\n              delay={beam.delay}\n              duration={beamDuration}\n            />\n          ))}\n        </div>\n        {/* warp__side--bottom */}\n        <div\n          style={{\n            ...sideStyle,\n            width: \"100cqi\", // 100% of the container's inline size\n            height: \"100cqmax\",\n            top: \"100%\",\n            transformOrigin: \"50% 0%\",\n            transform: \"rotateX(-90deg)\",\n          }}\n        >\n          {bottomBeams.map((beam, index) => (\n            <Beam\n              key={`bottom-${index}`}\n              width={`${beamSize}%`}\n              x={beam.x}\n              delay={beam.delay}\n              duration={beamDuration}\n            />\n          ))}\n        </div>\n        {/* warp__side--left */}\n        <div\n          className={clsx(\"warp__side\", \"warp__side--left\")}\n          style={{\n            ...sideStyle,\n            width: \"100cqh\", // 100% of the container's block size\n            height: \"100cqmax\",\n            top: 0,\n            left: 0,\n            transformOrigin: \"0% 0%\",\n            transform: \"rotate(90deg) rotateX(-90deg)\",\n          }}\n        >\n          {leftBeams.map((beam, index) => (\n            <Beam\n              key={`left-${index}`}\n              width={`${beamSize}%`}\n              x={`${beam.x * beamSize}%`}\n              delay={beam.delay}\n              duration={beamDuration}\n            />\n          ))}\n        </div>\n      </div>\n      <div className=\"relative\">{children}</div>\n    </div>\n  );\n};\n\nexport default WarpAnimationContainer;\n",
      "type": "registry:ui",
      "target": ""
    }
  ]
}